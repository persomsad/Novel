# ä¸‹ä¸€æ­¥ä¼˜åŒ–å»ºè®®

**ç”Ÿæˆæ—¶é—´**: 2025-11-09
**å½“å‰ç‰ˆæœ¬**: v0.4.0
**ç›®æ ‡**: ä¸“æ³¨å°è¯´åˆ›ä½œçš„ AI åŠ©æ‰‹

---

## âœ… å·²å®ŒæˆåŠŸèƒ½æ€»è§ˆ

### v0.4.0ï¼ˆ2025-11-09ï¼‰- ç®€åŒ–ä½“éªŒï¼Œä¸“æ³¨åˆ›ä½œ
- âœ… ç®€åŒ–æƒé™ç³»ç»Ÿï¼ˆ2çº§ï¼šdefault vs read-onlyï¼‰
- âœ… æç¤ºè¯æ–‡ä»¶æ”¯æŒï¼ˆ-f å‚æ•° + å˜é‡æ›¿æ¢ï¼‰
- âœ… ç»ˆç«¯è¾“å…¥ä½ç½®ä¼˜åŒ–ï¼ˆ65% å±å¹•ä½ç½®ï¼‰
- âœ… ä¼šè¯å‹ç¼©åŠŸèƒ½ï¼ˆ/compress å‘½ä»¤ï¼‰
- âœ… ä¼šè¯ç®¡ç†åŠŸèƒ½ï¼ˆ/sessions + /exportï¼‰

### v0.3.0ï¼ˆ2025-11-09ï¼‰- ç»ˆç«¯ä½“éªŒä¼˜åŒ–
- âœ… éäº¤äº’æ¨¡å¼ï¼ˆ--print, JSON è¾“å‡ºï¼‰
- âœ… æµå¼è¾“å‡ºï¼ˆ--streamï¼‰
- âœ… æ™ºèƒ½ç¼“å­˜ï¼ˆ3å±‚ç¼“å­˜ç³»ç»Ÿï¼‰
- âœ… æ‰¹é‡æ“ä½œï¼ˆglob æ¨¡å¼ + å¹¶è¡Œå¤„ç†ï¼‰
- âœ… å·¥å…·æƒé™æ§åˆ¶
- âœ… å¢å¼ºå†…å­˜ç³»ç»Ÿï¼ˆé•¿æœŸè®°å¿† + SQLiteï¼‰
- âœ… æ€§èƒ½ä¼˜åŒ–ï¼ˆæ€§èƒ½è¿½è¸ªï¼‰
- âœ… å‹å¥½é”™è¯¯æ¶ˆæ¯
- âœ… **æ–‡ä»¶ç›‘æ§**ï¼ˆ`file_watcher.py`ï¼‰
- âœ… **æ™ºèƒ½ä¸Šä¸‹æ–‡æ£€ç´¢**ï¼ˆ`context_retriever.py`ï¼‰

### v0.2.0ï¼ˆåŸºç¡€èƒ½åŠ›ï¼‰
- âœ… ç²¾å‡†ç¼–è¾‘å·¥å…·ï¼ˆedit_chapter_lines, replace_in_file, multi_editï¼‰
- âœ… è‡ªåŠ¨ä¿®å¤å»ºè®®ï¼ˆverify_strict_timeline/referencesï¼‰
- âœ… æ™ºèƒ½å›¾æŸ¥è¯¢ï¼ˆsmart_context_search, build_character_network, trace_foreshadowï¼‰
- âœ… ä¼šè¯æŒä¹…åŒ–ï¼ˆSqliteSaverï¼‰
- âœ… NervusDB é›†æˆ

### æµ‹è¯•è¦†ç›–ç‡
- **270 ä¸ªæµ‹è¯•**ï¼ˆ269 passed, 1 skippedï¼‰
- **è¦†ç›–ç‡ 66.80%**

---

## ğŸ¯ v0.5.0 è®¡åˆ’ - å†…å®¹å±‚å·¥å…·

**æ ¸å¿ƒç†å¿µ**: æŠ€æœ¯å±‚ï¼ˆv0.1-v0.4ï¼‰å·²å®Œå–„ï¼Œç°åœ¨è¡¥å……**å†…å®¹å±‚**æ•°æ®ç»“æ„

> **"Bad programmers worry about the code. Good programmers worry about data structures."** - Linus Torvalds

### ä¸ºä»€ä¹ˆæ˜¯"å†…å®¹å±‚"ï¼Ÿ

å½“å‰çŠ¶æ€ï¼š
- âœ… **æŠ€æœ¯å±‚**ï¼šç¼–è¾‘å·¥å…·ã€å›¾æŸ¥è¯¢ã€ä¸€è‡´æ€§éªŒè¯ã€æ–‡ä»¶ç›‘æ§ã€ä¸Šä¸‹æ–‡æ£€ç´¢ â†’ å·²å®Œå–„
- âŒ **å†…å®¹å±‚**ï¼šå¦‚ä½•å¼€å§‹å†™ï¼Ÿæ€ä¹ˆä¿æŒé£æ ¼ï¼Ÿæ€ä¹ˆå¿«é€Ÿæå†™åœºæ™¯ï¼Ÿ â†’ ç¼ºå¤±

å°±åƒ Linuxï¼š
- âœ… å†…æ ¸ï¼ˆæŠ€æœ¯å±‚ï¼‰â†’ å·²ç»å¾ˆå¼º
- âŒ ç”¨æˆ·ç©ºé—´ï¼ˆå†…å®¹å±‚ï¼‰â†’ éœ€è¦è¡¥å……

---

## ğŸ“‹ v0.5.0 åŠŸèƒ½æ¸…å•

### 1. å†™ä½œæ¨¡æ¿ç³»ç»Ÿ â­â­â­â­â­ï¼ˆP1ï¼Œæœ€å®ç”¨ï¼‰

**é—®é¢˜**ï¼š
- é‡å¤æå†™åŒç±»åœºæ™¯æ•ˆç‡ä½ï¼ˆæˆ˜æ–—ã€å¯¹è¯ã€åœºæ™¯è½¬æ¢ï¼‰
- ä¸åŒç« èŠ‚é£æ ¼ä¸ç»Ÿä¸€

**è§£å†³æ–¹æ¡ˆ**ï¼š

#### æ•°æ®ç»“æ„ï¼š`spec/templates/`

```
spec/templates/
â”œâ”€â”€ scene-description.md      # åœºæ™¯æå†™æ¨¡æ¿
â”œâ”€â”€ dialogue.md               # å¯¹è¯æ¨¡æ¿
â”œâ”€â”€ action.md                 # åŠ¨ä½œæå†™æ¨¡æ¿
â”œâ”€â”€ psychology.md             # å¿ƒç†æå†™æ¨¡æ¿
â””â”€â”€ transition.md             # åœºæ™¯è¿‡æ¸¡æ¨¡æ¿
```

#### æ–°å¢å·¥å…·

```python
# src/novel_agent/tools.py

@tool
def apply_template(
    template_name: str,  # "scene-description", "dialogue"
    variables: dict      # {"character_a": "å¼ ä¸‰", "action_a": "æŒ¥å‰‘"}
) -> str:
    """åº”ç”¨å†™ä½œæ¨¡æ¿"""
    pass

@tool
def list_templates(category: str | None = None) -> str:
    """åˆ—å‡ºæ‰€æœ‰å¯ç”¨æ¨¡æ¿"""
    pass
```

**å·¥ä½œé‡**ï¼š2-3 å¤©

---

### 2. é£æ ¼æŒ‡å—ç³»ç»Ÿ â­â­â­â­â­ï¼ˆP1ï¼Œä¿è¯ä¸€è‡´æ€§ï¼‰

**é—®é¢˜**ï¼š
- ç¦ç”¨è¯è¿‡åº¦ä½¿ç”¨ï¼ˆ"çªç„¶"ã€"ç«Ÿç„¶"ï¼‰
- è§’è‰²è¯­æ°”ä¸ä¸€è‡´
- æ ‡ç‚¹ç¬¦å·ä¸è§„èŒƒ

**è§£å†³æ–¹æ¡ˆ**ï¼š

#### æ•°æ®ç»“æ„ï¼š`spec/style-guide.yaml`

```yaml
writing_style:
  tone: "è½»æ¾å¹½é»˜"        # æˆ–"ä¸¥è‚ƒæ·±æ²‰"ã€"çƒ­è¡€æ¿€æ˜‚"
  pacing: "å¿«èŠ‚å¥"        # æˆ–"æ…¢èŠ‚å¥"ã€"ä¸­ç­‰èŠ‚å¥"
  sentence_length: "çŸ­å¥ä¸ºä¸»"

forbidden_words:
  - "çªç„¶"    # åŸå› ï¼šè¿‡åº¦ä½¿ç”¨
  - "ç«Ÿç„¶"
  - "å±…ç„¶"

character_voice:
  å¼ ä¸‰:
    tone: "ç²—çŠ·ã€ç›´æ¥"
    vocabulary: ["è€å­", "ä»–å¨˜çš„"]
    forbidden: ["å‘µå‘µ", "å˜»å˜»"]
  æå››:
    tone: "æ–‡é›…ã€å§”å©‰"
    vocabulary: ["åœ¨ä¸‹", "é˜ä¸‹"]
    forbidden: ["è€å­"]

punctuation_rules:
  dialogue_end: "ã€‚"
  exclamation_limit: 3    # æ¯ç« æœ€å¤š3ä¸ªæ„Ÿå¹å·
  ellipsis_format: "â€¦â€¦"
```

#### æ–°å¢å·¥å…·

```python
@tool
def check_style_compliance(chapter_number: int) -> str:
    """æ£€æŸ¥ç« èŠ‚æ˜¯å¦ç¬¦åˆé£æ ¼æŒ‡å—

    Returns:
        - ç¦ç”¨è¯æ±‡ä½¿ç”¨æƒ…å†µ
        - è§’è‰²è¯­æ°”ä¸€è‡´æ€§
        - æ ‡ç‚¹ç¬¦å·è§„èŒƒæ€§
        - ä¿®å¤å»ºè®®
    """
    pass

@tool
def apply_style_fix(chapter_number: int, auto_fix: bool = False) -> str:
    """åº”ç”¨é£æ ¼ä¿®å¤å»ºè®®"""
    pass
```

**å·¥ä½œé‡**ï¼š2-3 å¤©

---

### 3. å¤§çº²ç”Ÿæˆå™¨ â­â­â­â­ï¼ˆP1ï¼Œåˆ›ä½œèµ·ç‚¹ï¼‰

**é—®é¢˜**ï¼š
- ä¸çŸ¥é“å¦‚ä½•å¼€å§‹å†™å°è¯´
- ä¸çŸ¥é“å¦‚ä½•åˆ†é…ç« èŠ‚å’Œæƒ…èŠ‚

**è§£å†³æ–¹æ¡ˆ**ï¼š

```python
# src/novel_agent/tools_creative.py

@tool
def generate_outline(
    genre: str,          # ç„å¹»ã€éƒ½å¸‚ã€ç§‘å¹»ã€æ­¦ä¾ ç­‰
    target_words: int,   # ç›®æ ‡å­—æ•°ï¼ˆå¦‚ 100000ï¼‰
    themes: list[str],   # ä¸»é¢˜åˆ—è¡¨ï¼ˆå¦‚ ["å¤ä»‡", "æˆé•¿"]ï¼‰
    style: str = "çˆ½æ–‡"  # é£æ ¼ï¼šçˆ½æ–‡ã€è™æ–‡ã€è½»æ¾ã€ä¸¥è‚ƒ
) -> str:
    """æ ¹æ®é¢˜æè‡ªåŠ¨ç”Ÿæˆä¸‰å¹•ç»“æ„å¤§çº²

    Returns:
        æ ¼å¼åŒ–çš„å¤§çº²æ–‡æœ¬ï¼ŒåŒ…å«ï¼š
        - ä¸‰å¹•ç»“æ„ï¼ˆèµ·æ‰¿è½¬åˆï¼‰
        - ç« èŠ‚åˆ†é…ï¼ˆæ¯å¹•å¤šå°‘ç« ï¼‰
        - å…³é”®æƒ…èŠ‚ç‚¹
        - è§’è‰²æˆé•¿å¼§çº¿
    """
    pass
```

**å·¥ä½œé‡**ï¼š3-5 å¤©

---

### 4. å¢å¼ºåˆ›ä½œå·¥å…· â­â­â­ï¼ˆP2ï¼Œæ¶¦è‰²ï¼‰

**åŠŸèƒ½**ï¼š

```python
@tool
def dialogue_enhancer(
    dialogue: str,
    character_hint: str | None = None,
    emotion: str | None = None
) -> str:
    """å¯¹è¯æ¶¦è‰²ï¼Œæ·»åŠ åŠ¨ä½œã€è¡¨æƒ…ã€å¿ƒç†æå†™"""
    pass

@tool
def plot_twist_generator(
    current_plot: str,
    intensity: str = "medium"
) -> list[str]:
    """ç”Ÿæˆæƒ…èŠ‚è½¬æŠ˜å»ºè®®"""
    pass

@tool
def scene_transition(
    from_scene: str,
    to_scene: str,
    transition_type: str = "time"
) -> str:
    """ç”Ÿæˆåœºæ™¯è¿‡æ¸¡æ–‡æœ¬"""
    pass
```

**å·¥ä½œé‡**ï¼š3-4 å¤©

---

## ğŸ“Š v0.5.0 ä¼˜å…ˆçº§æ€»ç»“

**æ—¶é—´è½´**ï¼ˆ2-3 å‘¨ï¼‰ï¼š
1. **Week 1**: å†™ä½œæ¨¡æ¿ + é£æ ¼æŒ‡å—ï¼ˆ4-6 å¤©ï¼‰
2. **Week 2**: å¤§çº²ç”Ÿæˆå™¨ï¼ˆ3-5 å¤©ï¼‰
3. **Week 3**: å¢å¼ºåˆ›ä½œå·¥å…·ï¼ˆå¯é€‰ï¼Œ3-4 å¤©ï¼‰

**æœ€å°å¯å‘å¸ƒ**ï¼ˆMVPï¼‰ï¼š
- å†™ä½œæ¨¡æ¿ç³»ç»Ÿ
- é£æ ¼æŒ‡å—ç³»ç»Ÿ

---

## ğŸš€ ç«‹å³è¡ŒåŠ¨æ¸…å•

### æœ¬å‘¨ï¼ˆæ–‡æ¡£æ¸…ç†ï¼‰âœ…
- [x] æ›´æ–° NEXT_STEPS.md - æ ‡è®°å·²å®ç°åŠŸèƒ½
- [ ] å½’æ¡£/æ›´æ–° analysis-gap-to-claude-code.md
- [ ] åˆ›å»º v0.5.0 Milestone
- [ ] åˆ›å»º 4 ä¸ªåŠŸèƒ½ Issues

### Week 1ï¼ˆå†™ä½œæ¨¡æ¿ + é£æ ¼æŒ‡å—ï¼‰
- [ ] åˆ›å»º `feat/writing-templates` åˆ†æ”¯
- [ ] è®¾è®¡æ¨¡æ¿æ•°æ®ç»“æ„ï¼ˆspec/templates/ï¼‰
- [ ] å®ç° `apply_template()` å’Œ `list_templates()`
- [ ] åˆ›å»º `feat/style-guide` åˆ†æ”¯
- [ ] è®¾è®¡é£æ ¼æŒ‡å—æ•°æ®ç»“æ„ï¼ˆspec/style-guide.yamlï¼‰
- [ ] å®ç° `check_style_compliance()` å’Œ `apply_style_fix()`

### Week 2ï¼ˆå¤§çº²ç”Ÿæˆå™¨ï¼‰
- [ ] åˆ›å»º `feat/outline-generator` åˆ†æ”¯
- [ ] è®¾è®¡å¤§çº²ç”Ÿæˆé€»è¾‘
- [ ] å®ç° `generate_outline()` å·¥å…·
- [ ] æ·»åŠ  CLI å‘½ä»¤ï¼š`novel-agent outline generate`

---

## ğŸ’¡ æ ¸å¿ƒæ´å¯Ÿ

**Talk is cheap. Show me the code.** - Linus Torvalds

ä¸è¦è¿½æ±‚"çœ‹èµ·æ¥å¾ˆé…·"çš„åŠŸèƒ½ï¼ˆWeb UIã€å¤šæ¨¡æ€ã€åä½œï¼‰ï¼Œä¸“æ³¨äºè§£å†³çœŸå®é—®é¢˜ï¼š

âœ… **çœŸå®é—®é¢˜**ï¼š
- æ€ä¹ˆå¼€å§‹å†™ï¼Ÿâ†’ å¤§çº²ç”Ÿæˆå™¨
- æ€ä¹ˆå†™å¾—æ›´å¿«ï¼Ÿâ†’ å†™ä½œæ¨¡æ¿
- æ€ä¹ˆä¿æŒé£æ ¼ä¸€è‡´ï¼Ÿâ†’ é£æ ¼æŒ‡å—

âŒ **å‡æƒ³é—®é¢˜**ï¼ˆæš‚ä¸åšï¼‰ï¼š
- VSCode æ’ä»¶ï¼ˆæŠ€æœ¯ç‚«æŠ€ï¼‰
- å¤šæ¨¡æ€æ”¯æŒï¼ˆè¿‡åº¦è®¾è®¡ï¼‰
- åä½œåŠŸèƒ½ï¼ˆä¸æ˜¯æ ¸å¿ƒåœºæ™¯ï¼‰

---

## ğŸ“š å‚è€ƒèµ„æ–™

- [åŠŸèƒ½ç¼ºå£åˆ†æ - å®ç”¨ä¸»ä¹‰ç‰ˆ](./docs/feature-gap-analysis-pragmatic.md)
- [CHANGELOG v0.4.0](../CHANGELOG.md#040---2025-11-09)
- [å·²å®ç°çš„æ–‡ä»¶ç›‘æ§](../src/novel_agent/file_watcher.py)
- [å·²å®ç°çš„ä¸Šä¸‹æ–‡æ£€ç´¢](../src/novel_agent/context_retriever.py)
